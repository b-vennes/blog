"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[135],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>p});var l=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,l,a=function(e,t){if(null==e)return{};var n,l,a={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=l.createContext({}),d=function(e){var t=l.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},h=function(e){var t=d(e.components);return l.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},c=l.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),c=d(n),p=a,u=c["".concat(o,".").concat(p)]||c[p]||m[p]||r;return n?l.createElement(u,i(i({ref:t},h),{},{components:n})):l.createElement(u,i({ref:t},h))}));function p(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=c;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var d=2;d<r;d++)i[d]=n[d];return l.createElement.apply(null,i)}return l.createElement.apply(null,n)}c.displayName="MDXCreateElement"},9744:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var l=n(7462),a=(n(7294),n(3905));const r={tags:["Python","HTML"],draft:!1},i="Building HTML with Python",s={permalink:"/2020/03/09/building-html-with-python",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2020-03-09-building-html-with-python.md",source:"@site/blog/2020-03-09-building-html-with-python.md",title:"Building HTML with Python",description:"In this tutorial I will be walking through the development of my HTML builder Python package.",date:"2020-03-09T00:00:00.000Z",formattedDate:"March 9, 2020",tags:[{label:"Python",permalink:"/tags/python"},{label:"HTML",permalink:"/tags/html"}],readingTime:6.145,hasTruncateMarker:!1,authors:[],frontMatter:{tags:["Python","HTML"],draft:!1},prevItem:{title:"Typeclasses and Ad-Hoc Polymorphism",permalink:"/2021/06/22/typeclass-and-ad-hoc-polymorphism"}},o={authorsImageUrls:[]},d=[{value:"Creating a Clientside Project With Python",id:"creating-a-clientside-project-with-python",level:2},{value:"Html Python Class",id:"html-python-class",level:2},{value:"Render Method",id:"render-method",level:2},{value:"Html Class Testing",id:"html-class-testing",level:2},{value:"Html Children",id:"html-children",level:2},{value:"Testing Child HTML Tags",id:"testing-child-html-tags",level:2},{value:"Rendering to an HTML File",id:"rendering-to-an-html-file",level:2}],h={toc:d};function m(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,l.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In this tutorial I will be walking through the development of my HTML builder Python package."),(0,a.kt)("p",null,"The completed package is available at ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/b-vennes/html_builder"},"bvennes/html_builder")," on GitHub."),(0,a.kt)("h2",{id:"creating-a-clientside-project-with-python"},"Creating a Clientside Project With Python"),(0,a.kt)("p",null,"The purpose of the HTML builder is to programmatically create an HTML file using Python. In the future, however, I would like to make SCSS and JavaScript builders as well so that the entirety of a web application could be built using Python."),(0,a.kt)("p",null,"HTML is a good place to start because the structure of an HTML file is fairly simple. HTML tags look like ",(0,a.kt)("inlineCode",{parentName:"p"},'<tag-name class="class-1 class-2"></tag-name>')," and are nested to build out component hierarchies."),(0,a.kt)("p",null,"An HTML tag can be broken down into 4 major components:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"name of the tag"),(0,a.kt)("li",{parentName:"ul"},"list of classes for the tag"),(0,a.kt)("li",{parentName:"ul"},"additional attributes like ",(0,a.kt)("inlineCode",{parentName:"li"},"onclick")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"style")),(0,a.kt)("li",{parentName:"ul"},"child tags or text")),(0,a.kt)("h2",{id:"html-python-class"},"Html Python Class"),(0,a.kt)("p",null,"To create an HTML tag in Python, I created a basic object called ",(0,a.kt)("inlineCode",{parentName:"p"},"Html")," holding access to the HTML tag's name, class names, and attributes like ",(0,a.kt)("inlineCode",{parentName:"p"},"onclick: doSomething()"),"."),(0,a.kt)("p",null,"It would also be possible for the classes list to be given as an attribute, since ",(0,a.kt)("inlineCode",{parentName:"p"},"class")," is technically just an attribute, but this is a good opportunity to make use of Python's ",(0,a.kt)("inlineCode",{parentName:"p"},"*args")," functionality."),(0,a.kt)("p",null,"Here is what the initial code looked like for the Html object:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'class Html:\n    def __init__(self, tag_name, *class_names, **attributes):\n        """Initializes a new html tag."""\n        self.name = tag_name\n        self.class_names = list(class_names)\n        self.attributes = attributes\n        self.children = []\n')),(0,a.kt)("h2",{id:"render-method"},"Render Method"),(0,a.kt)("p",null,"In order to output the Html object as a string, I added a ",(0,a.kt)("inlineCode",{parentName:"p"},"render")," method."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"def render(self):\n        \"\"\"Renders the html tag as a string.\"\"\"\n        html = f'<{self.name}'\n\n        if self.class_names.__len__() > 0:\n            classes_list = ' '.join(self.class_names)\n            html += f' class=\"{classes_list}\"'\n\n        for key, value in self.attributes.items():\n            html += f' {key}=\"{value}\"'\n\n        html += f'></{self.name}>'\n\n        return html\n")),(0,a.kt)("p",null,"To render the HTML tag as a string, we maintain an html element that begins with ",(0,a.kt)("inlineCode",{parentName:"p"},"<self.name"),", add the classes as a list separated by a space, add the sets of attribute key/value pairs, and finally close it off with ",(0,a.kt)("inlineCode",{parentName:"p"},"></self.name>"),"."),(0,a.kt)("p",null,"With both the ",(0,a.kt)("inlineCode",{parentName:"p"},"__init__")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"render")," methods completed, the ",(0,a.kt)("inlineCode",{parentName:"p"},"Html")," class looks like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'class Html:\n    def __init__(self, tag_name, *class_names, **attributes):\n        """Initializes a new html tag."""\n        self.name = tag_name\n        self.class_names = list(class_names)\n        self.attributes = attributes\n        self.children = []\n\n    def render(self):\n        """Renders the html tag as a string."""\n        html = f\'<{self.name}\'\n\n        if self.class_names.__len__() > 0:\n            classes_list = \' \'.join(self.class_names)\n            html += f\' class="{classes_list}"\'\n\n        for key, value in self.attributes.items():\n            html += f\' {key}="{value}"\'\n\n        html += f\'></{self.name}>\'\n\n        return html\n')),(0,a.kt)("h2",{id:"html-class-testing"},"Html Class Testing"),(0,a.kt)("p",null,"Before testing this class out, let's setup the full ",(0,a.kt)("inlineCode",{parentName:"p"},"html_builder")," Python package."),(0,a.kt)("p",null,"First, create a new directory called ",(0,a.kt)("em",{parentName:"p"},"html_builder"),"."),(0,a.kt)("p",null,"Add a blank file within this directory called ","_","_","init","_","_",".py"),(0,a.kt)("p",null,"Add a subdirectory to ",(0,a.kt)("em",{parentName:"p"},"html_builder")," also called ",(0,a.kt)("em",{parentName:"p"},"html_builder"),"."),(0,a.kt)("p",null,"Within the ",(0,a.kt)("em",{parentName:"p"},"html_builder")," subdirectory, add a file named ",(0,a.kt)("em",{parentName:"p"},"html.py")," and copy the ",(0,a.kt)("inlineCode",{parentName:"p"},"Html")," class from above."),(0,a.kt)("p",null,"Then, create a test script in the same folder as the top-level ",(0,a.kt)("em",{parentName:"p"},"html_builder")," directory named ",(0,a.kt)("em",{parentName:"p"},"html_test.py"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"# html_test.py\nfrom html_builder.html import Html\n\nbutton = Html('button', 'class-1', 'class-2', onclick=\"alert('Hello world!')\")\n\nprint(button.render())\n\n")),(0,a.kt)("p",null,"The output of this Python script should be ",(0,a.kt)("inlineCode",{parentName:"p"},'<button class="class-1 class-2" onclick="alert(\'Hello world!\')"></button>'),". Let's copy this to a file named ",(0,a.kt)("em",{parentName:"p"},"button.html")," and open it in a web browser. We should see a tiny button with no text. If we click on it, the window alerts us with the message ",(0,a.kt)("inlineCode",{parentName:"p"},"Hello world!"),". That's a promising start!"),(0,a.kt)("p",null,"But users will want to be able to add text to their button. In order to do this, we want our button to be able to contain some child elements, like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<button class="class-1 class-2" onclick="alert(\'Hello world!\')">\n    Click me!\n</button>\n')),(0,a.kt)("h2",{id:"html-children"},"Html Children"),(0,a.kt)("p",null,"Let's add a child element to our button."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"button = Html('button', onclick=\"alert('Hello world!')\")\nbutton.children += ['Click me!']\n")),(0,a.kt)("p",null,"However, our render method isn't rendering any of our children, so let's fix that by adding a method called ",(0,a.kt)("inlineCode",{parentName:"p"},"render_children()"),". We will make it a private method so that we can encapsulate any additional logic that might occur while rendering the tag's children. To make the method private, add ",(0,a.kt)("inlineCode",{parentName:"p"},"__")," before the method name."),(0,a.kt)("p",null,"This is also a good time to make the HTML format nicely when printed using newline characters and spaces."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"def __render_children(self):\n    \"\"\"Renders the tag's children\"\"\"\n    rendered_children = ''\n\n    for child in self.children:\n        rendered_children += '\\n    '\n        if type(child) is Html:\n            rendered_children += child.render().replace('\\n','\\n    ')\n        else:\n            rendered_children += child\n    \n    rendered_children += '\\n'\n    \n    return rendered_children\n")),(0,a.kt)("p",null,"Let's also modify the ",(0,a.kt)("inlineCode",{parentName:"p"},"render")," to use the new private method."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"def render(self):\n    \"\"\"Renders the html tag as a string.\"\"\"\n    html = f'<{self.name}'\n\n    if self.class_names.__len__() > 0:\n        classes_list = ' '.join(self.class_names)\n        html += f' class=\"{classes_list}\"'\n        \n    for key, value in self.attributes.items():\n        html += f' {key}=\"{value}\"'\n\n    rendered_children = self.__render_children()\n\n    html += f'>{rendered_children}</{self.name}>'\n\n    return html\n")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Html")," class should now look like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'# html.py\nclass Html:\n    def __init__(self, tag_name, *class_names, **attributes):\n        """Initializes a new html tag."""\n        self.name = tag_name\n        self.class_names = list(class_names)\n        self.attributes = attributes\n        self.children = []\n\n    def render(self):\n        """Renders the html tag as a string."""\n        html = f\'<{self.name}\'\n\n        if self.class_names.__len__() > 0:\n            classes_list = \' \'.join(self.class_names)\n            html += f\' class="{classes_list}"\'\n            \n        for key, value in self.attributes.items():\n            html += f\' {key}="{value}"\'\n\n        rendered_children = self.__render_children()\n\n        html += f\'>{rendered_children}</{self.name}>\'\n\n        return html\n\n    def __render_children(self):\n        """Renders the tag\'s children"""\n        rendered_children = \'\'\n\n        for child in self.children:\n            rendered_children += \'\\n    \'\n            if type(child) is Html:\n                rendered_children += child.render().replace(\'\\n\',\'\\n    \')\n            else:\n                rendered_children += child\n        \n        rendered_children += \'\\n\'\n        \n        return rendered_children\n')),(0,a.kt)("p",null,"Looks good! Now we'll want to update our test script to make use of the new functionality. I've added ",(0,a.kt)("inlineCode",{parentName:"p"},"div")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"title")," elements to test out nested HTML."),(0,a.kt)("h2",{id:"testing-child-html-tags"},"Testing Child HTML Tags"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"# html_test.py\nfrom html_builder.html_builder.html import Html\n\ndiv = Html('div')\n\ntitle = Html('h1')\n\nbutton = Html('button', onclick=\"alert('Hello world!')\")\n\nbutton.children += ['Click me!']\ntitle.children += ['HTML Builder Test']\ndiv.children += [title, button]\n\nprint(div.render())\n")),(0,a.kt)("p",null,"After running the ",(0,a.kt)("em",{parentName:"p"},"html_test.py")," script we should see the output"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},"<div>\n    <h1>\n        HTML Builder Test\n    </h1>\n    <button onclick=\"alert('Hello world!')\">\n        Click me!\n    </button>\n</div>\n")),(0,a.kt)("p",null,"After copying the output to ",(0,a.kt)("em",{parentName:"p"},"test.html")," and reloading the browser, it should show our title and a button that says 'Click me!'."),(0,a.kt)("h2",{id:"rendering-to-an-html-file"},"Rendering to an HTML File"),(0,a.kt)("p",null,"At this point, our builder is just about done. But it might be helpful for our users to render HTML directly into a file. So I've added an ",(0,a.kt)("inlineCode",{parentName:"p"},"output_file")," parameter to the ",(0,a.kt)("inlineCode",{parentName:"p"},"render")," method so that users can specify a path where the rendered HTML should go. Before returning the HTML as a string, I've also added a section for opening the file if it is given, writing to it, and closing it."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"def render(self, output_file_path=None):\n    \"\"\"Renders the html tag as a string.\"\"\"\n    html = f'<{self.name}'\n\n    if self.class_names.__len__() > 0:\n        classes_list = ' '.join(self.class_names)\n        html += f' class=\"{classes_list}\"'\n        \n    for key, value in self.attributes.items():\n        html += f' {key}=\"{value}\"'\n\n    rendered_children = self.__render_children()\n\n    html += f'>{rendered_children}</{self.name}>'\n\n    if output_file_path != None:\n        output_file = open(output_file_path, 'w')\n        output_file.write(html)\n        output_file.close()\n\n    return html\n")),(0,a.kt)("p",null,"To verify this behavior works correctly, I've specified the output file in the test script."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"from html_builder.html_builder.html import Html\n\ndiv = Html('div')\n\ntitle = Html('h1')\n\nbutton = Html('button', onclick=\"alert('Hello world!')\")\n\nbutton.children += ['Click me!']\ntitle.children += ['HTML Builder Test']\ndiv.children += [title, button]\n\nprint(div.render('./test.html'))\n")),(0,a.kt)("p",null,"Now when we run the script, the HTML is printed to both the output terminal and the ",(0,a.kt)("em",{parentName:"p"},"test.html")," file. Neat!"))}m.isMDXComponent=!0}}]);